<div class="register-form">
  <h2>Register</h2>

  <form #registerForm="ngForm" (ngSubmit)="register(registerForm)" novalidate>

    <!-- First Name -->
    <label>First Name:</label>
    <input
      type="text"
      name="firstName"
      [(ngModel)]="customer.firstName"
      #firstName="ngModel"
      required
      minlength="2"
    />
    <div *ngIf="firstName.invalid && (firstName.dirty || firstName.touched || registerForm.submitted)">
      <small *ngIf="firstName.errors?.['required']" style="color:red">Required — please enter your first name</small>
      <small *ngIf="firstName.errors?.['minlength']" style="color:red">Too short (at least 2 characters)</small>
    </div>

    <!-- Last Name -->
    <label>Last Name:</label>
    <input
      type="text"
      name="lastName"
      [(ngModel)]="customer.lastName"
      #lastName="ngModel"
      required
      minlength="2"
    />
    <div *ngIf="lastName.invalid && (lastName.dirty || lastName.touched || registerForm.submitted)">
      <small *ngIf="lastName.errors?.['required']" style="color:red">Required — please enter your last name</small>
      <small *ngIf="lastName.errors?.['minlength']" style="color:red">Too short (at least 2 characters)</small>
    </div>

    <!-- Email -->
    <label>Email:</label>
    <input
      type="email"
      name="email"
      [(ngModel)]="customer.email"
      #email="ngModel"
      required
      email
    />
    <div *ngIf="email.invalid && (email.dirty || email.touched || registerForm.submitted)">
      <small *ngIf="email.errors?.['required']" style="color:red">Please enter your email</small>
      <small *ngIf="email.errors?.['email']" style="color:red">Invalid email address</small>
    </div>

    <!-- Phone -->
    <label>Phone:</label>
    <input
      type="text"
      name="phone"
      [(ngModel)]="customer.phone"
      #phone="ngModel"
      required
      pattern="^[0-9]{10}$"
    />
    <div *ngIf="phone.invalid && (phone.dirty || phone.touched || registerForm.submitted)">
      <small *ngIf="phone.errors?.['required']" style="color:red">Please enter your phone number</small>
      <small *ngIf="phone.errors?.['pattern']" style="color:red">Enter 10 digits (no + or dashes)</small>
    </div>

    <!-- Birth Date -->
    <label>Birth Date:</label>
    <input
      type="date"
      name="birthDate"
      [(ngModel)]="customer.birthDate"
      #birthDate="ngModel"
      required
      [max]="today"
    />
    <div *ngIf="birthDate.invalid && (birthDate.dirty || birthDate.touched || registerForm.submitted)">
      <small *ngIf="birthDate.errors?.['required']" style="color:red">Please select your birth date</small>
      <small *ngIf="birthDate.errors?.['max']" style="color:red">Birth date cannot be in the future</small>
    </div>

    <button type="submit" [disabled]="registerForm.invalid" style="margin-top: 10px;">
      Register
    </button>
  </form>

  <!-- General Messages -->
  <div *ngIf="successMessage" style="color: green; margin-top: 10px;">
    {{ successMessage }}
  </div>

  <div *ngIf="errorMessage" style="color: red; margin-top: 10px;">
    {{ errorMessage }}
  </div>

  <button *ngIf="showLoginButton" (click)="navigateToLogin()" style="margin-top: 10px; padding: 8px 16px;">
    Login Instead
  </button>
</div>
