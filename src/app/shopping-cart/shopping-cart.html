<div class="cart-overlay" (click)="closeCart()">
  <div class="cart-sidebar" (click)="$event.stopPropagation()">
    <div class="cart-header">
      <h2>Shopping Cart</h2>
      <button class="close-cart-btn" (click)="closeCart()">&times;</button>
    </div>
    
    <div class="cart-content">
      <!-- 专拽  砖 驻专 注 -->
      <div *ngIf="showCart.length > 0">
        <div class="cart-items">
          <div *ngFor="let item of showCart" class="cart-item">
            <div class="item-image">
              <img [src]="getProductImage(item)" alt="{{item.productName}}">
            </div>
            <div class="item-details">
              <h4>{{item.productName}}</h4>
              <p class="item-price">${{item.price}}</p>
              <div class="quantity-controls">
                <button class="qty-btn" (click)="deleteItem(item.productID)">-</button>
                <span class="quantity">{{item.quantity}}</span>
                <button class="qty-btn" (click)="addItem(item.productID)">+</button>
              </div>
            </div>
          </div>
        </div>
        
        <div class="cart-footer">
          <div class="total-section">
            <div class="total-amount">
              <strong>Total: ${{ totalAmount }}</strong>
            </div>
          </div>
          
          <div class="notes-section">
            <label for="notes">Order Notes:</label>
            <textarea id="notes" [(ngModel)]="purchaseNotes" placeholder="Special instructions..."></textarea>
          </div>
          
          <button class="checkout-btn" 
                  [class.disabled]="totalAmount > 5000" 
                  [disabled]="totalAmount > 5000" 
                  (click)="finishPurchase()">
            {{totalAmount > 5000 ? 'Maximum $5,000 limit exceeded' : 'Complete Purchase'}}
          </button>
          
          <div *ngIf="totalAmount > 5000" class="limit-warning">
            锔 Purchase limit is $5,000. Please remove items to proceed.
          </div>
          
          <div *ngIf="message" class="cart-message">{{ message }}</div>
        </div>
      </div>
      
      <!--   驻专 砖转砖 专 -->
      <div *ngIf="showCart.length == 0 && isLoggedIn" class="empty-cart">
        <div class="empty-cart-icon"></div>
        <h3>Your cart is empty</h3>
        <p>Add some products to get started!</p>
      </div>
      
      <!--  砖转砖  专 -->
      <div *ngIf="!isLoggedIn" class="login-required">
        <div class="login-icon"></div>
        <h3>Please log in</h3>
        <p>Sign in to view your cart</p>
        <button class="login-btn" (click)="goToLogin()">Go to Login</button>
      </div>
    </div>
  </div>
</div>
